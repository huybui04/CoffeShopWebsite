@model btl_web_coffeeshop.Utilities.PagedList<btl_web_coffeeshop.Models.Product>
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@{
    ViewData["Title"] = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
}

<h1>Index</h1>

<p>
    <a asp-action="Create" class="btn btn-primary">Create New</a>
</p>

<div id="productTableContainer">
    @Html.Partial("_ProductTable", Model) <!-- Load the initial table -->
</div>

@section Scripts {
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        function loadPage(pageIndex) {
            $.ajax({
                url: '@Url.Action("Index")',
                type: 'GET',
                data: { pageIndex: pageIndex },
                success: function (result) {
                    $('#productTableContainer').html(result); // Replace the table with the new data
                },
                error: function (xhr, status, error) {
                    console.error("AJAX request failed:", status, error);
                }
            });
        }
    </script>
}
